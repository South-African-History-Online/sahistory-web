{#
/**
 * @file
 * SAHO Citation Button Component Template
 *
 * Extends saho-button component with citation-specific features.
 * Inherits base button styling and adds modal integration.
 *
 * Props:
 * - title (string): Button text
 * - size (string): small|medium|large (inherits from saho-button)
 * - show_icon (boolean): Display citation icon
 * - position (string): inline|toolbar|floating
 * - modal_target (string): Target modal ID
 * - accessibility (object): { aria_label, description }
 */
#}

{%
  set classes = [
    'saho-button',
    'saho-button--primary',
    'saho-citation-button',
    size ? 'saho-button--' ~ size : 'saho-button--medium',
    position ? 'saho-citation-button--' ~ position : ''
  ]
%}

{%
  set button_attributes = {
    'type': 'button',
    'class': classes|join(' '),
    'data-citation-trigger': 'true',
    'data-bs-toggle': 'modal',
    'data-bs-target': '#' ~ (modal_target|default('citation-modal')),
    'aria-label': accessibility.aria_label|default(title ~ ' - Opens citation modal'),
    'title': accessibility.description|default('Get academic citations for this content')
  }
%}

<button
  {% for attr_name, attr_value in button_attributes %}
    {{ attr_name }}="{{ attr_value }}"
  {% endfor %}>

  {% if show_icon|default(true) %}
    <span class="saho-citation-button__icon" aria-hidden="true">
      <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor" role="img">
        <title>Citation quotes icon</title>
        <path d="M12 12a1 1 0 0 0 1-1V8.558a1 1 0 0 0-1-1h-1.388c0-.351.021-.703.062-1.054.062-.372.166-.703.31-.992.145-.29.331-.517.559-.683.227-.186.516-.279.868-.279V3c-.579 0-1.085.124-1.52.372a3.322 3.322 0 0 0-1.085.992 4.92 4.92 0 0 0-.62 1.458A7.712 7.712 0 0 0 9 7.558V11a1 1 0 0 0 1 1h2Zm-6 0a1 1 0 0 0 1-1V8.558a1 1 0 0 0-1-1H4.612c0-.351.021-.703.062-1.054.062-.372.166-.703.31-.992.145-.29.331-.517.559-.683.227-.186.516-.279.868-.279V3c-.579 0-1.085.124-1.52.372a3.322 3.322 0 0 0-1.085.992 4.92 4.92 0 0 0-.62 1.458A7.712 7.712 0 0 0 3 7.558V11a1 1 0 0 0 1 1h2Z"/>
      </svg>
    </span>
  {% endif %}

  <span class="saho-button__text saho-citation-button__text">
    {{ title|default('Cite This Page') }}
  </span>

</button>
