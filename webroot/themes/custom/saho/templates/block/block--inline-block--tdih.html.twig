{#
/**
 * @file
 * TDIH block template.
 *
 * This template renders a "Today in History" block with an optional image,
 * title link, and date. If no matching nodes are found, it displays a
 * fallback message. A "View more events" button links to /this-day-in-history.
 */
#}

<div class="block-section">
  <div class="block-section-header">
    <div class="block-title-wrapper">
      <h2>Today in history</h2>
    </div>
    <div class="block-meta">{{ "now"|date('j F') }}</div>
  </div>
  
  <p class="intro-text">Find out who was born, who died and other significant events from this day in history</p>

  {% if tdih_nodes %}
    <div class="block-content">
      {% for item in tdih_nodes %}
        {% if item.image %}
          <div class="block-image-wrapper">
            <img src="{{ item.image }}" alt="{{ item.title|striptags }}" class="block-image" />
            <div class="block-label">{{ item.event_date|date('Y') }}</div>
          </div>
        {% endif %}

        <h3>
          <a href="{{ item.url }}">{{ item.title|striptags }}</a>
        </h3>
        
        <div class="block-date">{{ item.event_date|date('j F Y') }}</div>
      {% endfor %}
    </div>
  {% else %}
    <div class="block-content">
      <p class="block-main-text">No events found.</p>
    </div>
  {% endif %}
  
  <div class="block-buttons">
    {% include 'saho:saho-button' with {
      text: 'More history'|t,
      url: '/this-day-in-history',
      size: 'medium'
    } %}
  </div>
</div>
