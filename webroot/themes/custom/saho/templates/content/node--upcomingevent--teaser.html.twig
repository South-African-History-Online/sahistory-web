{#
/**
 * @file
 * Theme override to display a teaser view of an upcoming event node.
 */
#}
{%
  set classes = [
    'event-card-clickable',
    event_status ? 'event-card--' ~ event_status
  ]
%}
<article{{ attributes.addClass(classes) }}>

  {# Event Image with Badges #}
  <div class="event-card__image-wrapper">
    <div class="event-card__image">
      {{ content.field_upcomingevent_image }}
    </div>

    {# Event Status Badge - positioned on image #}
    {% if event_status %}
      <div class="event-card__badge event-card__badge--{{ event_status }}">
        {% if event_status == 'in-progress' %}
          <span class="badge-pulse"></span>
        {% endif %}
        {{ event_status_label }}
      </div>
    {% endif %}

    {# Countdown Badge for Upcoming Events #}
    {% if countdown %}
      <div class="event-card__countdown">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" fill="currentColor"/>
        </svg>
        {{ countdown }}
      </div>
    {% endif %}
  </div>

  <div class="event-card__content">
    {# Event Title #}
    {{ title_prefix }}
    {% if label %}
      <h2{{ title_attributes.addClass('event-card__title') }}>
        <a href="{{ url }}" rel="bookmark">{{ label }}</a>
      </h2>
    {% endif %}
    {{ title_suffix }}

    {# Event Meta Information #}
    <div class="event-card__meta">
      {# Date/Time - use Drupal's field rendering #}
      {% if content.field_start_date|render|striptags|trim %}
        <div class="event-card__date">
          <svg class="event-card__icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
          </svg>
          {{ content.field_start_date }}
          {% if content.field_end_date|render|striptags|trim %}
            - {{ content.field_end_date }}
          {% endif %}
        </div>
      {% endif %}

      {# Venue #}
      {% if content.field_upcoming_venue|render|striptags|trim %}
        <div class="event-card__venue">
          <svg class="event-card__icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
          </svg>
          {{ content.field_upcoming_venue }}
        </div>
      {% endif %}
    </div>

    {# Event Description/Body #}
    {% if content.body|render|striptags|trim %}
      <div class="event-card__excerpt">
        {{ content.body }}
      </div>
    {% endif %}

    {# Call to Action Button #}
    <div class="event-card__action">
      <a href="{{ url }}" class="event-card__button">
        Learn More
        <span class="event-card__button-arrow">â†’</span>
      </a>
    </div>
  </div>

</article>
