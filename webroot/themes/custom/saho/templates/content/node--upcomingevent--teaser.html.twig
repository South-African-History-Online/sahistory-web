{#
/**
 * @file
 * Theme override to display a teaser view of an upcoming event node.
 */
#}
{%
  set classes = [
    'event-card-clickable',
    event_status ? 'event-card--' ~ event_status
  ]
%}
<article{{ attributes.addClass(classes) }}>

  {# Event Image with Badges #}
  <div class="event-card__image-wrapper">
    <div class="event-card__image">
      {{ content.field_upcomingevent_image }}
    </div>

    {# Event Status Badge - positioned on image #}
    {% if event_status %}
      <div class="event-card__badge event-card__badge--{{ event_status }}">
        {% if event_status == 'in-progress' %}
          <span class="badge-pulse"></span>
        {% endif %}
        {{ event_status_label }}
      </div>
    {% endif %}

    {# Countdown Badge for Upcoming Events #}
    {% if countdown %}
      <div class="event-card__countdown">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" fill="currentColor"/>
        </svg>
        {{ countdown }}
      </div>
    {% endif %}
  </div>

  <div class="event-card__content">
    {# Event Title #}
    {{ title_prefix }}
    {% if label %}
      <h2{{ title_attributes.addClass('event-card__title') }}>
        <a href="{{ url }}" rel="bookmark">{{ label }}</a>
      </h2>
    {% endif %}
    {{ title_suffix }}

    {# Event Meta Information #}
    <div class="event-card__meta">
      {# Start Date #}
      {% if content.field_start_date|render|striptags|trim %}
        <div class="event-card__date">
          📅 {{ content.field_start_date }}
        </div>
      {% endif %}

      {# Venue #}
      {% if content.field_upcoming_venue|render|striptags|trim %}
        <div class="event-card__venue">
          📍 {{ content.field_upcoming_venue }}
        </div>
      {% endif %}
    </div>

    {# Event Description/Body #}
    {% if content.body|render|striptags|trim %}
      <div class="event-card__excerpt">
        {{ content.body }}
      </div>
    {% endif %}

    {# Call to Action Button #}
    <div class="event-card__action">
      <a href="{{ url }}" class="event-card__button">
        Learn More
        <span class="event-card__button-arrow">→</span>
      </a>
    </div>
  </div>

</article>
