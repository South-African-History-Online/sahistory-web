{#
/**
 * @file
 * Theme override for unformatted view rows for all upcoming events.
 * Creates modern event card display.
 */
#}

{% for row in rows %}
  {% set node = view.result[loop.index0]._entity %}
  <div class="event-card-clickable">

    {# Event Image #}
    {% if row.content['field_upcomingevent_image'] %}
      <div class="event-card__image">
        {{ row.content['field_upcomingevent_image'] }}
      </div>
    {% endif %}

    <div class="event-card__content">
      {# Event Title with Link #}
      <h2 class="event-card__title">
        <a href="{{ node.toUrl().toString() }}">
          {{ node.title.value }}
        </a>
      </h2>

      {# Event Meta Information #}
      <div class="event-card__meta">
        {# Start Date #}
        {% if node.field_start_date.value %}
          <div class="event-card__date">
            üìÖ {{ node.field_start_date.value|date('j F Y') }}
          </div>
        {% endif %}

        {# Venue #}
        {% if node.field_upcoming_venue.value %}
          <div class="event-card__venue">
            üìç {{ node.field_upcoming_venue.value|striptags }}
          </div>
        {% endif %}
      </div>

      {# Event Description #}
      {% if node.body.value %}
        <div class="event-card__description">
          {{ node.body.value|striptags|slice(0, 200) }}
          {% if node.body.value|striptags|length > 200 %}...{% endif %}
        </div>
      {% endif %}

      {# Call to Action Button #}
      <div class="event-card__cta">
        <a href="{{ node.toUrl().toString() }}" class="btn btn-primary">
          Learn More
          <span class="arrow">‚Üí</span>
        </a>
      </div>
    </div>

  </div>
{% endfor %}
