/**
 * @file
 * SAHO Upcoming Events - Modernized with Unified Token System
 * Uses --events-* scoped tokens inheriting from --saho-* base tokens
 * Mobile-first responsive design with comprehensive accessibility
 * Component works in isolation with no external dependencies beyond base tokens
 */

/* ========================================
   ROOT CONTAINER & COMPONENT TOKENS
   ======================================== */

.all-upcoming-events-page {
  /* Component-scoped tokens inheriting from unified system */
  
  /* Color tokens */
  --events-color-primary: var(--saho-color-primary);  /* #990000 */
  --events-color-primary-dark: var(--saho-color-primary-dark);
  --events-color-white: var(--saho-color-white);
  --events-color-text: var(--saho-color-text-primary);
  --events-color-text-secondary: var(--saho-color-text-secondary);
  --events-color-text-muted: var(--saho-color-text-muted);
  
  /* Status colors */
  --events-color-success: var(--saho-color-success);
  --events-color-danger: var(--saho-color-danger);
  --events-color-past: #666;
  
  /* Background colors */
  --events-color-bg: var(--saho-color-white);
  --events-color-bg-alt: var(--saho-color-surface-alt);
  --events-color-border: var(--saho-color-border);
  --events-color-border-light: var(--saho-color-border-light);
  
  /* Spacing tokens from 8px baseline */
  --events-space-1: var(--saho-space-1);  /* 8px */
  --events-space-2: var(--saho-space-2);  /* 16px */
  --events-space-3: var(--saho-space-3);  /* 24px */
  --events-space-4: var(--saho-space-4);  /* 32px */
  --events-space-5: var(--saho-space-5);  /* 40px */
  --events-space-6: var(--saho-space-6);  /* 48px */
  
  /* Typography tokens */
  --events-font-size-xs: var(--saho-font-size-xs);    /* 12px */
  --events-font-size-sm: var(--saho-font-size-sm);    /* 14px */
  --events-font-size-base: var(--saho-font-size-base);  /* 16px */
  --events-font-size-md: var(--saho-font-size-md);    /* 18px */
  --events-font-size-lg: var(--saho-font-size-lg);    /* 20px */
  --events-font-size-xl: var(--saho-font-size-xl);    /* 24px */
  --events-font-size-2xl: var(--saho-font-size-2xl);  /* 28px */
  --events-font-size-3xl: var(--saho-font-size-3xl);  /* 36px */
  
  --events-font-weight-normal: var(--saho-font-weight-medium);
  --events-font-weight-bold: var(--saho-font-weight-bold);
  
  --events-line-height-tight: var(--saho-line-height-tight);
  --events-line-height-normal: var(--saho-line-height-normal);
  --events-line-height-relaxed: var(--saho-line-height-relaxed);
  
  /* Border radius tokens */
  --events-radius-sm: var(--saho-radius-sm);  /* 4px */
  --events-radius-md: var(--saho-radius-md);  /* 8px */
  --events-radius-lg: var(--saho-radius-lg);  /* 12px */
  
  /* Shadow tokens */
  --events-shadow-sm: var(--saho-shadow-sm);
  --events-shadow-md: var(--saho-shadow-md);
  --events-shadow-hover: var(--saho-shadow-hover);
  
  /* Transition tokens */
  --events-transition-fast: var(--saho-transition-fast);
  --events-transition-base: var(--saho-transition-base);
  
  /* Dimension tokens */
  --events-container-max: 1400px;
  --events-card-min: 300px;
  --events-image-height: 200px;
  --events-badge-size: 2.5rem;
  --events-icon-size: 16px;
  
  /* Z-index */
  --events-z-index-overlay: 10;
  
  background: var(--events-color-bg);
}

/* ========================================
   PAGE CONTAINER
   ======================================== */

.saho-events-container {
  max-width: var(--events-container-max);
  margin: 0 auto;
  padding: var(--events-space-4) var(--events-space-2);
}

/* ========================================
   EVENT SECTIONS
   ======================================== */

.events-section {
  margin-bottom: var(--events-space-6);
}

.events-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--events-space-3);
  padding-bottom: var(--events-space-2);
  border-bottom: 3px solid var(--events-color-primary);
}

.section-header-content {
  display: flex;
  align-items: center;
  gap: var(--events-space-2);
}

.events-section-title {
  font-size: var(--events-font-size-2xl);
  font-weight: var(--events-font-weight-bold);
  color: var(--events-color-text);
  margin: 0;
}

.events-count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: var(--events-badge-size);
  height: var(--events-badge-size);
  padding: 0 var(--events-space-2);
  background: var(--events-color-primary);
  color: var(--events-color-white);
  border-radius: var(--events-radius-md);
  font-size: var(--events-font-size-lg);
  font-weight: var(--events-font-weight-bold);
}

.events-section--past .events-section-header {
  border-bottom-color: var(--events-color-text-muted);
}

.events-section--past .events-count {
  background: var(--events-color-past);
}

/* ========================================
   TOGGLE BUTTON - Inherits from button system
   ======================================== */

.toggle-past-events {
  /* Inheriting from button system */
  display: flex;
  align-items: center;
  gap: var(--events-space-1);
  padding: var(--saho-button-padding-sm-y) var(--saho-button-padding-sm-x);
  background: var(--saho-button-secondary-bg);
  border: var(--saho-button-border-width) solid var(--saho-button-secondary-border);
  border-radius: var(--saho-button-radius-sm);
  color: var(--saho-button-secondary-text);
  font-size: var(--saho-button-font-size-sm);
  font-weight: var(--saho-button-font-weight);
  cursor: pointer;
  transition: var(--saho-button-transition);
}

.toggle-past-events:hover {
  background: var(--saho-button-secondary-bg-hover);
  color: var(--saho-button-secondary-text-hover);
  border-color: var(--saho-button-secondary-border-hover);
}

.toggle-past-events:focus {
  outline: var(--saho-button-focus-outline-width) solid var(--saho-button-focus-outline);
  outline-offset: var(--saho-button-focus-outline-offset);
}

.toggle-icon {
  transition: transform var(--events-transition-base);
}

.toggle-past-events[aria-expanded="true"] .toggle-icon {
  transform: rotate(180deg);
}

/* ========================================
   EVENT GRID LAYOUT
   ======================================== */

.saho-events-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(var(--events-card-min), 1fr));
  gap: var(--events-space-3);
}

.saho-events-grid--past {
  max-height: 0;
  overflow: hidden;
  transition: max-height var(--events-transition-base) ease;
}

.saho-events-grid--expanded {
  max-height: none;
  overflow: visible;
}

/* ========================================
   EVENT CARDS
   ======================================== */

.event-card-clickable {
  position: relative;
  display: flex;
  flex-direction: column;
  background: var(--events-color-white);
  border: 1px solid var(--events-color-border);
  border-radius: var(--events-radius-md);
  overflow: hidden;
  transition: var(--events-transition-fast);
  cursor: pointer;
  height: 100%;
}

.event-card-clickable:hover {
  transform: translateY(-4px);
  box-shadow: var(--events-shadow-hover);
  border-color: var(--events-color-primary);
}

.event-card__image-wrapper {
  position: relative;
  width: 100%;
}

.event-card__image {
  width: 100%;
  height: var(--events-image-height);
  overflow: hidden;
  background: var(--events-color-bg-alt);
  display: flex;
  align-items: center;
  justify-content: center;
}

.event-card__image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform var(--events-transition-base);
}

.event-card-clickable:hover .event-card__image img {
  transform: scale(1.05);
}

.event-card__content {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: var(--events-space-3);
}

.event-card__title {
  font-size: var(--events-font-size-md);
  font-weight: var(--events-font-weight-bold);
  line-height: var(--events-line-height-tight);
  margin: 0 0 var(--events-space-2);
}

.event-card__title a {
  color: var(--events-color-text);
  text-decoration: none;
}

.event-card__title a:hover {
  color: var(--events-color-primary);
}

.event-card__meta {
  display: flex;
  flex-direction: column;
  gap: var(--events-space-1);
  margin-bottom: var(--events-space-2);
  font-size: var(--events-font-size-sm);
  color: var(--events-color-text-muted);
}

.event-card__date,
.event-card__venue {
  display: flex;
  align-items: center;
  gap: var(--events-space-1);
}

.event-card__excerpt {
  flex: 1;
  font-size: var(--events-font-size-base);
  line-height: var(--events-line-height-relaxed);
  color: var(--events-color-text-secondary);
  margin-bottom: var(--events-space-2);
}

.event-card__action {
  margin-top: auto;
}

/* Button styling handled by saho-button component */

/* ========================================
   EVENT STATUS BADGES
   ======================================== */

.event-card__badge {
  position: absolute;
  top: var(--events-space-2);
  left: var(--events-space-2);
  z-index: var(--events-z-index-overlay);
  padding: var(--events-space-1);
  border-radius: var(--events-radius-sm);
  font-size: var(--events-font-size-xs);
  font-weight: var(--events-font-weight-bold);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.event-card__badge--upcoming {
  background: var(--events-color-success);
  color: var(--events-color-white);
}

.event-card__badge--in-progress {
  background: var(--events-color-danger);
  color: var(--events-color-white);
}

.event-card__badge--past {
  background: var(--events-color-past);
  color: var(--events-color-white);
}

.badge-pulse {
  display: inline-block;
  width: 6px;
  height: 6px;
  background: var(--events-color-white);
  border-radius: 50%;
  margin-right: 0.25rem;
  animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}

.event-card__countdown {
  position: absolute;
  top: var(--events-space-2);
  right: var(--events-space-2);
  z-index: var(--events-z-index-overlay);
  display: inline-flex;
  align-items: center;
  gap: var(--events-space-1);
  padding: var(--events-space-1);
  background: var(--events-color-white);
  border: 1px solid var(--events-color-border-light);
  border-radius: var(--events-radius-sm);
  font-size: var(--events-font-size-xs);
  font-weight: var(--events-font-weight-normal);
  color: var(--events-color-primary);
}

.event-card__countdown svg {
  width: 12px;
  height: 12px;
}

/* ========================================
   PAST EVENTS STYLING
   ======================================== */

.event-card--past {
  opacity: 0.7;
}

.event-card--past:hover {
  opacity: 0.85;
}

.event-card--past .event-card__image::after {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.15);
}

.event-card--past .event-card__title a {
  color: var(--events-color-text-muted) !important;
}

/* ========================================
   IN-PROGRESS EVENTS
   ======================================== */

.event-card--in-progress {
  border-color: var(--events-color-danger);
  border-width: 2px;
}

/* ========================================
   EMPTY STATE & MESSAGES
   ======================================== */

.saho-empty-state {
  text-align: center;
  padding: var(--events-space-6) var(--events-space-2);
  color: var(--events-color-text-muted);
  font-size: var(--events-font-size-lg);
}

.saho-no-events-message {
  padding: var(--events-space-4);
  background: var(--events-color-bg-alt);
  border: 1px solid var(--events-color-border);
  border-radius: var(--events-radius-md);
  text-align: center;
}

.saho-no-events-message p {
  margin: 0 0 var(--events-space-2);
  font-size: var(--events-font-size-lg);
  line-height: var(--events-line-height-relaxed);
  color: var(--events-color-text-secondary);
}

.saho-no-events-message p:last-child {
  margin-bottom: 0;
}

.saho-contact-link {
  color: var(--events-color-primary);
  font-weight: var(--events-font-weight-normal);
  text-decoration: none;
  border-bottom: 2px solid transparent;
  transition: border-color var(--events-transition-fast);
}

.saho-contact-link:hover {
  border-bottom-color: var(--events-color-primary);
}

/* ========================================
   RESPONSIVE ADJUSTMENTS
   ======================================== */

@media (max-width: 1024px) {
  .saho-events-grid {
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  }
}

@media (max-width: 768px) {
  .saho-events-container {
    padding: var(--events-space-3) var(--events-space-2);
  }

  .events-section-header {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--events-space-2);
  }

  .events-section-title {
    font-size: var(--events-font-size-xl);
  }

  .toggle-past-events {
    width: 100%;
    justify-content: center;
  }

  .saho-events-grid {
    grid-template-columns: 1fr;
    gap: var(--events-space-2);
  }

  .event-card__image {
    height: 180px;
  }
}

@media (max-width: 480px) {
  .events-section-title {
    font-size: var(--events-font-size-lg);
  }

  .events-count {
    min-width: 2rem;
    height: 2rem;
    font-size: var(--events-font-size-base);
  }

  .event-card__image {
    height: 160px;
  }

  .event-card__content {
    padding: var(--events-space-2);
  }

  .event-card__title {
    font-size: var(--events-font-size-base);
  }
}

/* ========================================
   UPCOMING EVENTS BLOCK
   ======================================== */

.saho-upcoming-events-block {
  margin: var(--events-space-4) 0;
}

.upcoming-events-header {
  text-align: center;
  margin-bottom: var(--events-space-4);
}

.upcoming-events-header h2 {
  color: var(--events-color-primary);
  font-size: var(--events-font-size-3xl);
  font-weight: var(--events-font-weight-bold);
  margin-bottom: var(--events-space-1);
}

.upcoming-events-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: var(--events-space-4);
  margin-top: var(--events-space-4);
}

.upcoming-event-card {
  background: var(--events-color-white);
  border-radius: var(--events-radius-lg);
  overflow: hidden;
  box-shadow: var(--events-shadow-md);
  transition: transform var(--events-transition-base) ease, box-shadow var(--events-transition-base) ease;
  display: flex;
  flex-direction: column;
}

.upcoming-event-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--events-shadow-hover);
}

.upcoming-event-card .event-image {
  width: 100%;
  height: 288px;
  overflow: hidden;
  background: var(--events-color-bg-alt);
  position: relative;
}

.upcoming-event-card .event-image a {
  display: block;
  width: 100%;
  height: 100%;
}

.upcoming-event-card .event-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center top;
  transition: transform var(--events-transition-base) ease;
}

.upcoming-event-card:hover .event-image img {
  transform: scale(1.05);
}

.upcoming-event-card .event-content {
  padding: var(--events-space-3);
  flex: 1;
  display: flex;
  flex-direction: column;
}

.upcoming-event-card .event-title {
  margin: 0 0 var(--events-space-2);
  font-size: var(--events-font-size-lg);
  line-height: var(--events-line-height-tight);
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
}

.upcoming-event-card .event-title a {
  color: var(--events-color-text);
  text-decoration: none;
  transition: color var(--events-transition-base) ease;
}

.upcoming-event-card .event-title a:hover {
  color: var(--events-color-primary);
}

.event-meta {
  margin-bottom: var(--events-space-2);
}

.event-date {
  color: var(--events-color-primary);
  font-weight: var(--events-font-weight-normal);
  font-size: var(--events-font-size-base);
  margin-bottom: var(--events-space-1);
  display: flex;
  align-items: center;
  gap: var(--events-space-1);
}

.event-venue {
  color: var(--events-color-text-muted);
  font-size: var(--events-font-size-sm);
  margin-bottom: var(--events-space-2);
  display: flex;
  align-items: center;
  gap: var(--events-space-1);
}

/* SVG Icon Styles */
.icon-calendar,
.icon-location {
  width: var(--events-icon-size);
  height: var(--events-icon-size);
  flex-shrink: 0;
}

.icon-calendar {
  color: var(--events-color-primary);
}

.icon-location {
  color: var(--events-color-text-muted);
}

.event-excerpt {
  color: var(--events-color-text-secondary);
  line-height: var(--events-line-height-normal);
  font-size: var(--events-font-size-base);
  flex: 1;
  margin-bottom: var(--events-space-2);
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
}

.event-link {
  margin-top: auto;
}

/* Read more link inherits from button system */
.read-more-link {
  /* Inherit from button system - primary variant */
  display: inline-block;
  padding: var(--saho-button-padding-sm-y) var(--saho-button-padding-sm-x);
  background: var(--saho-button-primary-bg);
  color: var(--saho-button-primary-text);
  text-decoration: none;
  border-radius: var(--saho-button-radius-sm);
  font-size: var(--saho-button-font-size-sm);
  font-weight: var(--saho-button-font-weight);
  transition: var(--saho-button-transition);
  align-self: flex-start;
  border: var(--saho-button-border-width) solid var(--saho-button-primary-border);
}

.read-more-link:hover,
.read-more-link:focus {
  background: var(--saho-button-primary-bg-hover);
  color: var(--saho-button-primary-text-hover) !important;
  border-color: var(--saho-button-primary-border-hover);
  text-decoration: none;
}

.read-more-link:focus {
  outline: var(--saho-button-focus-outline-width) solid var(--saho-button-focus-outline);
  outline-offset: var(--saho-button-focus-outline-offset);
}

/* ========================================
   VIEW ALL EVENTS LINK - Inherits from button system
   ======================================== */

.view-all-events {
  text-align: center;
  margin-top: var(--events-space-4);
}

.view-all-link {
  /* Inherit from button system - primary variant large */
  display: inline-block;
  padding: var(--saho-button-padding-md-y) var(--saho-button-padding-md-x);
  background: var(--saho-button-primary-bg);
  color: var(--saho-button-primary-text);
  text-decoration: none;
  border-radius: var(--saho-button-radius-md);
  font-size: var(--saho-button-font-size-md);
  font-weight: var(--saho-button-font-weight);
  transition: var(--saho-button-transition);
  border: var(--saho-button-border-width) solid var(--saho-button-primary-border);
}

.view-all-link:hover,
.view-all-link:focus {
  background: var(--saho-button-primary-bg-hover);
  color: var(--saho-button-primary-text-hover) !important;
  border-color: var(--saho-button-primary-border-hover);
  text-decoration: none;
}

.view-all-link:focus {
  outline: var(--saho-button-focus-outline-width) solid var(--saho-button-focus-outline);
  outline-offset: var(--saho-button-focus-outline-offset);
}

/* ========================================
   ALL EVENTS PAGE
   ======================================== */

.all-events-header {
  background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
  color: var(--events-color-white);
  padding: var(--events-space-6) 0 var(--events-space-4);
  position: relative;
}

.all-events-header .page-title {
  font-size: var(--events-font-size-3xl);
  font-weight: var(--events-font-weight-bold);
  margin: 0 0 var(--events-space-2);
  text-align: center;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
}

.all-events-header .page-description {
  max-width: 700px;
  margin: 0 auto;
  text-align: center;
  font-size: var(--events-font-size-xl);
  line-height: var(--events-line-height-normal);
  opacity: 0.9;
}

.all-events-header .page-description p {
  margin: 0 0 0.8rem;
}

.all-events-header .page-description p:last-child {
  margin-bottom: 0;
}

/* ========================================
   ACCESSIBILITY & FOCUS STATES
   ======================================== */

.event-card-clickable:focus-visible,
.toggle-past-events:focus-visible,
.read-more-link:focus-visible,
.view-all-link:focus-visible {
  outline: var(--saho-button-focus-outline-width) solid var(--saho-button-focus-outline);
  outline-offset: var(--saho-button-focus-outline-offset);
}

/* Screen reader only text */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}
